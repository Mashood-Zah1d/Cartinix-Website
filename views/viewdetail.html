<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Details</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
body {
  background: linear-gradient(135deg, #0f172a, #1e293b, #374151);
  font-family: 'Poppins', sans-serif;
  color: #f8fafc;
}

.card {
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
  background: linear-gradient(135deg, #1f2937, #374151);
  border: 1px solid #4b5563;
}

h2.text-center {
  color: #f8fafc;
  font-weight: 700;
}

.carousel-item img {
  border-radius: 15px;
  max-height: 500px;
  object-fit: cover;
  width: 100%;
  border: 2px solid #4b5563;
}

#productDescription {
  font-size: 1.05rem;
  font-weight: 500;
  color: #cbd5e1;
  margin-bottom: 20px;
  line-height: 1.6;
}

.product-info-list {
  color: #e2e8f0;
  list-style: none;
  padding: 0;
}

.product-info-list li {
  color: #e2e8f0;
  font-size: 1.15rem;
  font-weight: 600;
  margin-bottom: 12px;
  padding: 8px 0;
  border-bottom: 1px solid #374151;
}

#price {
  color:  #06b6d4;
  font-weight: 800;
  font-size: 1.8rem;
  margin-top: 30px;
  margin-bottom: 30px;
  text-align: left;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

.custom-btn {
  background: linear-gradient(135deg, #7c3aed, #6366f1, #8b5cf6);
  color: white;
  border: none;
  padding: 14px 28px;
  font-size: 16px;
  font-weight: 700;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
  transition: all 0.3s ease;
  margin-right: 10px;
}

.custom-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 25px rgba(124, 58, 237, 0.6);
  background: linear-gradient(135deg, #6366f1, #4f46e5, #7c3aed);
}

.custom-btn.secondary {
  background: linear-gradient(135deg, #dc2626, #ef4444, #f87171);
  box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
}

.custom-btn.secondary:hover {
  background: linear-gradient(135deg, #b91c1c, #dc2626, #ef4444);
  box-shadow: 0 8px 25px rgba(220, 38, 38, 0.6);
}

.product-title {
  color: #f8fafc;
  font-size: 2.2rem;
  font-weight: 800;
  margin-bottom: 25px;
  text-align: center;
  background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.thumbnail-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-right: 20px;
}

.thumbnail-container img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 12px;
  border: 2px solid #4b5563;
  cursor: pointer;
  transition: all 0.3s ease;
}

.thumbnail-container img:hover {
  border-color: #06b6d4;
  transform: scale(1.05);
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
}

.carousel-wrapper {
  display: flex;
  gap: 20px;
}

.color-options {
  margin-top: 25px;
}

.color-options button {
  width: 100px;
  height: 40px;
  background-color:  #4b5563;
  border-radius: 20px;
  margin-right: 12px;
  border: 3px solid #4b5563;
  outline: none;
  cursor: pointer;
  transition: all 0.3s ease;
}

.color-options button:hover {
  transform: scale(1.15);
  border-color: #06b6d4;
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
}

h2.stylish-heading {
  font-family: 'Great Vibes', cursive;
  font-size: 3rem;
  text-align: center;
  margin-top: 40px;
  color: #f8fafc;
  background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h4.stylish-heading {
  font-family: 'Great Vibes', cursive;
  font-size: 2.5rem;
  text-align: center;
  margin-top: 40px;
  color: #f8fafc;
  background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
</style>
</head>
<body>
  <div class="container py-5">
    <h2 class="text-center mb-4 stylish-heading">Product Details</h2>
    <div class="card p-4">
      <div class="row">
        <div class="col-md-6">
          <div class="carousel-wrapper">
            <div class="thumbnail-container" id="thumbnailContainer">
             
            </div>
            <div id="carouselExample" class="carousel slide" data-bs-ride="false" style="flex: 1;">
              <div class="carousel-inner" id="imageCarousel">
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <h4 id="productTitle" class="product-title  stylish-heading">Product Name</h4>
          <h3 id="price"></h3>
          <ul class="product-info-list">
            <li id="brand">Brand:</li>
            <li id="category">Category:</li>
            <li id="material">Material:</li>
            <li id="movement_type">Movement Type:</li>
          </ul>
          <p id="productDescription">Product description will go here...</p>

          <!-- Color option buttons -->
          <div class="color-options" id="colorOptions">
           
          </div>

          <div class="d-flex flex-wrap justify-content-center mt-4">
            <button class="custom-btn">Add to Cart</button>
            <button class="custom-btn secondary" id="buynow">Buy Now</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const productid = localStorage.getItem("productid");
    const coloroption = document.getElementById("colorOptions");
    fetch(`http://localhost:8000/product-details?productid=${productid}`)
      .then(async res => {
        if (!res.ok) {
          const text = await res.json();
          throw new Error(text.Error);
        }
        return res.json();
      })
      .then(data => {
        document.getElementById("productTitle").innerText = "Name: " + data.details.title;
        document.getElementById("price").innerText = "Price: " + data.details.price + " /-rs";
        document.getElementById("brand").innerText = "Brand: " + data.details.brand;
        document.getElementById("category").innerText = "Category: " + data.details.category;
        document.getElementById("material").innerText = "Material: " + data.details.material;
        document.getElementById("movement_type").innerText = "Stock: " + data.details.stock;
        document.getElementById("productDescription").innerText = data.details.description;

        const carousel = document.getElementById("imageCarousel");

        data.images.forEach((img, index) => {
          const div = document.createElement("div");
          div.className = "carousel-item" + (index === 0 ? " active" : "");
          div.innerHTML = `<img src="http://localhost:8000/photos/${img.image_path}" class="d-block w-100" alt="Product Image">`;
          carousel.appendChild(div);


          const thumb = document.createElement("img");
          thumb.src = `http://localhost:8000/photos/${img.image_path}`;
          thumb.onclick = () => {
            const carouselItems = document.querySelectorAll(".carousel-item");
            carouselItems.forEach(item => item.classList.remove("active"));
            carouselItems[index].classList.add("active");
          };
          document.getElementById("thumbnailContainer").appendChild(thumb);
    })
    data.color.forEach((color,index) => {
  const btn = document.createElement("button");
  btn.title = color.color_name;
  btn.innerText = color.color_name;
  btn.onclick = () => {
    localStorage.setItem("color",btn.innerText);
    const carouselItems = document.querySelectorAll(".carousel-item");
    carouselItems.forEach(item => item.classList.remove("active"));
    carouselItems[index].classList.add("active");
  };
  coloroption.appendChild(btn);
        });
});

document.getElementById("buynow").addEventListener("click",(e)=>{
    e.preventDefault();
    window.location.href = "addtocart.html"
})
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
